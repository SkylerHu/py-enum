# 前言
主要是给开发者阅读，描述开发前后需要注意的一些事项。

# 开发环境
- `> python2.7 or > python3.6`的python环境
- `pip install -U -r requirements_test.txt`
- 系统安装`brew install pre-commit`
  - brew安装`/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)"`
  - 在项目更目录下执行`pre-commit install --hook-type pre-commit --hook-type commit-msg`

# 项目部分结构说明
- `pytest.ini` 测试脚本的配置
- `.coveragerc` 测试覆盖度工具使用的配置，在pytest.ini中引用
- `.pre-commit-config.yaml` git提交代码前pre-commit执行的检测相关配置
- `requirements.in` 开发、跑测试用例需要的环境
- `tests` 测试用例目录
  - `app` 对应Django中的App模块，定义了数据库等
  - `conftest.py` pytest测试用例全局变量配置
  - `settings` Django settings配置，在pytest.ini中引用
- `py_eunm` lib核心代码

# 运行测试用例

    pytest tests
    # 或者跑部分测试用例
    pytest tests/test_choice.py
    pytest tests/test_choice.py -k test_enum_value

# 打包发版
- 删除本地构建缓存目录：`py_enum.egg-info`和`dist`
- 执行打包 `python setup.py sdist`
- 检查生成的文件是否符合pypi的要求 `twine check dist/py-enum-xxx.tar.gz`
- 上传 `twine upload dist/py-enum-xxx.tar.gz`
- 或者直接打包上传 `python setup.py sdist upload -r pypi`
  - 需要本地`~/.pypirc`配置用户名密码

# TODO
使用tox工具完成各个python/dango版本的自动化测试。
